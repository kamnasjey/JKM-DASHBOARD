# ===========================================
# JKM Dashboard - Environment Variables
# Copy this file to .env.local and fill values
# ===========================================

# ===== LAUNCH MODE =====
# "coming-soon" = Shows Coming Soon page (for pre-launch testing)
# "live" = Shows full product landing page
NEXT_PUBLIC_LAUNCH_MODE="live"

# ===== DATABASE (REQUIRED) =====
# Production: Use Postgres connection string (Vercel Postgres / Supabase / Neon)
# Example: postgresql://user:password@host:5432/dbname?sslmode=require
# Local dev: Can use SQLite => file:./prisma/dev.db (change schema.prisma provider too)
DATABASE_URL="postgresql://..."

# ===== NEXTAUTH (REQUIRED) =====
# Production: https://jkmcopilot.com or your actual domain
NEXTAUTH_URL="http://localhost:3000"
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="generate-a-secure-secret-here"

# ===== GOOGLE OAUTH (REQUIRED for Google login) =====
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# ===== STRIPE (REQUIRED for billing gating) =====
STRIPE_SECRET_KEY=""
STRIPE_WEBHOOK_SECRET=""

# ===== BACKEND API (REQUIRED) =====
# Internal API key for backend proxy (server-side only, never expose to client)
BACKEND_INTERNAL_API_KEY=""

# ===== DASHBOARD INTERNAL API (REQUIRED if backend syncs to Firebase via dashboard) =====
# Used by the Python backend to call /api/internal/user-data/* routes.
DASHBOARD_INTERNAL_API_KEY=""

# The internal endpoints include:
# - GET/PUT /api/internal/user-data/strategies/{userId}
# - POST     /api/internal/user-data/signals
# - GET      /api/internal/user-data/users
# - GET/PUT  /api/internal/user-data/users/{userId}  (prefs: telegram, scan_enabled, etc.)

# ===== USER DATA (OPTIONAL - FIREBASE) =====
# Default: strategies/profile are loaded from backend (SQLite on VPS)
# Set to "firebase" to store user strategies in Firestore via firebase-admin.
USER_DATA_PROVIDER="backend"

# If USER_DATA_PROVIDER=firebase and the user has no strategies in Firestore yet,
# optionally pull once from backend and write to Firestore.
USER_DATA_MIGRATE_FROM_BACKEND="true"

# Firebase Web App config (client-side)
NEXT_PUBLIC_FIREBASE_API_KEY=""
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=""
NEXT_PUBLIC_FIREBASE_PROJECT_ID=""
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=""
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=""
NEXT_PUBLIC_FIREBASE_APP_ID=""
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=""

# Firebase Admin (server-side) - pick ONE method:
# Option A) Full JSON (recommended on Vercel as a single secret)
FIREBASE_ADMIN_SERVICE_ACCOUNT_JSON=""
# Option B) Split fields
FIREBASE_ADMIN_PROJECT_ID=""
FIREBASE_ADMIN_CLIENT_EMAIL=""
# IMPORTANT: private key must keep newlines. On Vercel, paste with \n or store as multiline secret.
FIREBASE_ADMIN_PRIVATE_KEY=""

# ===== OWNER / ADMIN BYPASS (OPTIONAL) =====
# Comma-separated emails that bypass paid access check
OWNER_ADMIN_EMAILS=""

# ===== WEBSOCKET (OPTIONAL) =====
# Only set if you have a dedicated WebSocket server
# Leave empty if backend handles realtime caching
# NEXT_PUBLIC_WS_URL="wss://..."
